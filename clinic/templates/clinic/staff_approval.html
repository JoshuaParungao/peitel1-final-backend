{% extends 'clinic/base.html' %}
{% block content %}

<div class="staff-approval-container">
    <h2>Staff Approval</h2>

    {% if just_registered %}
    <div class="alert warning-alert">
        <strong>Registration submitted.</strong> The account for <strong>{{ just_registered }}</strong> is pending admin approval and appears below.
    </div>
    {% endif %}

    {% if pending_staff %}
    <div class="table-responsive">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Username</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Email</th>
                    <th>Registered</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for staff in pending_staff %}
                <tr>
                    <td><strong>{{ staff.username }}</strong></td>
                    <td>{{ staff.first_name }}</td>
                    <td>{{ staff.last_name }}</td>
                    <td>{{ staff.email }}</td>
                    <td>{{ staff.date_joined|date:"M d, Y H:i" }}</td>
                    <td>
                        <a href="{% url 'clinic:approve_staff' staff.pk %}" class="btn approve-btn">Approve</a>
                        <a href="{% url 'clinic:reject_staff' staff.pk %}" class="btn reject-btn" onclick="return confirm('Are you sure?')">Reject</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="alert info-alert">
        No pending staff approvals.
    </div>
    {% endif %}

    <div class="back-btn-wrapper">
        <a href="{% url 'clinic:dashboard' %}" class="btn back-btn">Back to Dashboard</a>
    </div>
</div>

<style>
.staff-approval-container {
    padding: 24px;
    max-width: 1000px;
    margin: 0 auto;
}

/* Alerts */
.alert {
    padding: 12px 16px;
    border-radius: 8px;
    margin-bottom: 16px;
    font-size: 14px;
}

.warning-alert {
    background-color: #fff3cd;
    color: #856404;
}

.info-alert {
    background-color: #d1ecf1;
    color: #0c5460;
}

/* Table */
.table {
    width: 100%;
    border-collapse: collapse;
    border-radius: 8px;
    overflow: hidden;
    background-color: #fff;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
}

.table thead {
    background-color: #f1f3f6;
}

.table th, .table td {
    padding: 12px 10px;
    text-align: left;
}

.table-hover tbody tr:hover {
    background-color: #f5f5f5;
}

/* Buttons */
.btn {
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 500;
    text-decoration: none;
    transition: background 0.2s;
    display: inline-block;
    margin-right: 4px;
}

.approve-btn {
    background-color: #28a745;
    color: #fff;
}

.approve-btn:hover {
    background-color: #218838;
}

.reject-btn {
    background-color: #dc3545;
    color: #fff;
}

.reject-btn:hover {
    background-color: #c82333;
}

.back-btn-wrapper {
    margin-top: 16px;
}

.back-btn {
    background-color: #6c757d;
    color: #fff;
}

.back-btn:hover {
    background-color: #5a6268;
}
</style>

{% endblock %}
